<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia do Palestrante</title>
    <!-- Tailwind CSS com plugin de tipografia -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .fade-transition {
            transition: opacity 0.3s ease-in-out;
        }
        .is-fading {
            opacity: 0;
        }
        .slide-viewer-content {
             background-color: #111827;
        }
    </style>
</head>
<body class="bg-slate-200">

    <main class="flex h-screen">
        
        <div class="w-2/3 h-full flex flex-col justify-center items-center p-8 relative slide-viewer-content">
            <div id="slide-viewer-content" class="w-full h-full flex flex-col justify-center items-center text-white fade-transition">
                <!-- Conteúdo do espectador injetado aqui -->
            </div>
            <div id="slide-counter" class="absolute bottom-8 left-8 text-gray-400 text-2xl font-bold"></div>
             <div class="absolute bottom-8 right-8 flex gap-4">
                <button id="prevBtn" class="bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <button id="nextBtn" class="bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                </button>
            </div>
        </div>

        <div class="w-1/3 h-full bg-white overflow-y-auto">
            <div id="speaker-notes-content" class="p-8 prose lg:prose-xl fade-transition">
                 <!-- Notas do apresentador injetadas aqui -->
            </div>
        </div>

    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // CONFIGURAÇÃO DO FIREBASE (já preenchida com os seus dados)
        const firebaseConfig = {
            apiKey: "AIzaSyC8a1ViD4lRkhJ5hBaJLVbzm3JH8XhZdZQ",
            authDomain: "studio-7497577336-6d2b4.firebaseapp.com",
            databaseURL: "https://studio-7497577336-6d2b4-default-rtdb.firebaseio.com",
            projectId: "studio-7497577336-6d2b4",
            storageBucket: "studio-7497577336-6d2b4.appspot.com",
            messagingSenderId: "283066125474",
            appId: "1:283066125474:web:65b010e98b4b0c5b5b1bfb"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>
    
    <!-- Carrega o conteúdo dos slides -->
    <script src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slideViewer = document.getElementById('slide-viewer-content');
            const speakerNotes = document.getElementById('speaker-notes-content');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slide-counter');

            let currentSlideIndex = 0;
            const presentationRef = database.ref('presentation/currentSlide');

            function updateSlide(index) {
                if (typeof slides !== 'undefined' && slides[index]) {
                    currentSlideIndex = index;
                    
                    slideViewer.classList.add('is-fading');
                    speakerNotes.classList.add('is-fading');

                    setTimeout(() => {
                        slideViewer.innerHTML = slides[currentSlideIndex].espectador;
                        speakerNotes.innerHTML = slides[currentSlideIndex].apresentador;
                        
                        slideCounter.textContent = `${currentSlideIndex + 1} / ${slides.length}`;
                        prevBtn.disabled = currentSlideIndex === 0;
                        nextBtn.disabled = currentSlideIndex === slides.length - 1;

                        slideViewer.classList.remove('is-fading');
                        speakerNotes.classList.remove('is-fading');
                    }, 300);
                }
            }

            function changeSlide(direction) {
                const newIndex = currentSlideIndex + direction;
                if (newIndex >= 0 && newIndex < slides.length) {
                    presentationRef.set(newIndex);
                }
            }
            
            presentationRef.on('value', (snapshot) => {
                const newIndex = snapshot.val();
                if (newIndex !== null && newIndex !== currentSlideIndex) {
                    updateSlide(newIndex);
                }
            });

            nextBtn.addEventListener('click', () => changeSlide(1));
            prevBtn.addEventListener('click', () => changeSlide(-1));

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') changeSlide(1);
                if (e.key === 'ArrowLeft') changeSlide(-1);
            });

            presentationRef.set(0).then(() => {
                updateSlide(0);
            });
        });
    </script>
</body>
</html>
